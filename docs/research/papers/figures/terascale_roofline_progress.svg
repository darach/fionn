<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 500">
  <defs>
    <linearGradient id="roofGrad2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f5576c"/>
      <stop offset="100%" style="stop-color:#fa709a"/>
    </linearGradient>
    <linearGradient id="memGrad2" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <marker id="progressArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#43e97b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="950" height="500" fill="#0f0f1a"/>

  <!-- Title -->
  <text x="475" y="35" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="22" font-weight="bold">Climbing the Roofline: fionn Progress</text>
  <text x="475" y="58" text-anchor="middle" fill="#666" font-family="Arial, sans-serif" font-size="12">Each optimization moves up the memory-bound slope toward peak performance</text>

  <!-- Chart area -->
  <g transform="translate(100, 90)">
    <!-- Axes -->
    <line x1="0" y1="320" x2="700" y2="320" stroke="#444" stroke-width="2"/>
    <line x1="0" y1="0" x2="0" y2="320" stroke="#444" stroke-width="2"/>

    <!-- Y-axis labels (log scale: Throughput GB/s) -->
    <text x="-15" y="320" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">0.1</text>
    <text x="-15" y="256" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">0.5</text>
    <text x="-15" y="192" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">2</text>
    <text x="-15" y="128" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">10</text>
    <text x="-15" y="64" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">50</text>
    <text x="-15" y="0" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="10">200</text>

    <!-- X-axis labels (Operational Intensity - effective ops/byte after optimization) -->
    <text x="0" y="340" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="10">1</text>
    <text x="175" y="340" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="10">10</text>
    <text x="350" y="340" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="10">100</text>
    <text x="525" y="340" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="10">1000</text>

    <!-- Grid lines -->
    <line x1="0" y1="256" x2="700" y2="256" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="0" y1="192" x2="700" y2="192" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="0" y1="128" x2="700" y2="128" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="0" y1="64" x2="700" y2="64" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="175" y1="0" x2="175" y2="320" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="350" y1="0" x2="350" y2="320" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>
    <line x1="525" y1="0" x2="525" y2="320" stroke="#222" stroke-width="1" stroke-dasharray="3,3"/>

    <!-- Compute ceiling (horizontal at ~285 GB/s parallel) -->
    <line x1="400" y1="25" x2="700" y2="25" stroke="#f5576c" stroke-width="3"/>
    <text x="550" y="18" text-anchor="middle" fill="#f5576c" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Compute Ceiling (32 threads)</text>

    <!-- Memory bandwidth roof (sloped) -->
    <line x1="0" y1="300" x2="400" y2="25" stroke="#667eea" stroke-width="3"/>
    <text x="120" y="180" text-anchor="middle" fill="#667eea" font-family="Arial, sans-serif" font-size="10" font-weight="bold" transform="rotate(-38, 120, 180)">DDR4 50 GB/s</text>

    <!-- Ridge point -->
    <circle cx="400" cy="25" r="5" fill="#43e97b" stroke="#fff" stroke-width="2"/>

    <!-- Progress points with arrows -->
    <!-- 1. serde_json: 0.4 GB/s, low intensity -->
    <circle cx="100" cy="275" r="10" fill="#636e72" stroke="#fff" stroke-width="2"/>
    <text x="100" y="298" text-anchor="middle" fill="#636e72" font-family="Arial, sans-serif" font-size="9" font-weight="bold">serde</text>
    <text x="100" y="310" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">0.4 GB/s</text>

    <!-- Arrow 1→2 -->
    <path d="M 110 270 Q 140 240 165 215" stroke="#43e97b" stroke-width="2" fill="none" marker-end="url(#progressArrow)"/>

    <!-- 2. simd-json: 2.5 GB/s -->
    <circle cx="175" cy="205" r="10" fill="#764ba2" stroke="#fff" stroke-width="2"/>
    <text x="175" y="228" text-anchor="middle" fill="#764ba2" font-family="Arial, sans-serif" font-size="9" font-weight="bold">simd-json</text>
    <text x="175" y="240" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">2.5 GB/s</text>

    <!-- Arrow 2→3 -->
    <path d="M 185 195 Q 220 165 255 145" stroke="#43e97b" stroke-width="2" fill="none" marker-end="url(#progressArrow)"/>

    <!-- 3. fionn (single): 10.5 GB/s -->
    <circle cx="265" cy="135" r="12" fill="#38f9d7" stroke="#fff" stroke-width="2"/>
    <text x="265" y="158" text-anchor="middle" fill="#38f9d7" font-family="Arial, sans-serif" font-size="9" font-weight="bold">fionn</text>
    <text x="265" y="170" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">10.5 GB/s (1T)</text>

    <!-- Arrow 3→4 -->
    <path d="M 277 125 Q 320 85 365 55" stroke="#43e97b" stroke-width="2" fill="none" marker-end="url(#progressArrow)"/>

    <!-- 4. fionn parallel: 285 GB/s -->
    <circle cx="380" cy="45" r="14" fill="#43e97b" stroke="#fff" stroke-width="3"/>
    <text x="380" y="75" text-anchor="middle" fill="#43e97b" font-family="Arial, sans-serif" font-size="10" font-weight="bold">parallel</text>
    <text x="380" y="87" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="8">285 GB/s (32T)</text>

    <!-- Projected future: 1 TB/s -->
    <circle cx="550" cy="0" r="12" fill="none" stroke="#00d2ff" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="550" y="-15" text-anchor="middle" fill="#00d2ff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">1 TB/s</text>
    <text x="550" y="25" text-anchor="middle" fill="#666" font-family="Arial, sans-serif" font-size="8">(projected)</text>

    <!-- Dashed arrow to future -->
    <path d="M 394 40 Q 470 15 535 5" stroke="#00d2ff" stroke-width="2" fill="none" stroke-dasharray="6,3"/>

    <!-- Axis titles -->
    <text x="350" y="365" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="12">Effective Operational Intensity (higher = more work per byte loaded)</text>
    <text x="-55" y="160" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="12" transform="rotate(-90, -55, 160)">Throughput (GB/s)</text>
  </g>

  <!-- Legend / Progress summary -->
  <g transform="translate(720, 100)">
    <rect x="0" y="0" width="200" height="280" rx="10" fill="#1a1a2e" stroke="#333" stroke-width="1"/>
    <text x="100" y="25" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">Optimization Stack</text>
    <line x1="15" y1="40" x2="185" y2="40" stroke="#333" stroke-width="1"/>

    <!-- Progress items -->
    <circle cx="25" cy="65" r="6" fill="#636e72"/>
    <text x="40" y="68" fill="#888" font-family="Arial, sans-serif" font-size="10">Baseline (serde)</text>
    <text x="40" y="82" fill="#666" font-family="Arial, sans-serif" font-size="9">0.4 GB/s</text>

    <circle cx="25" cy="110" r="6" fill="#764ba2"/>
    <text x="40" y="113" fill="#888" font-family="Arial, sans-serif" font-size="10">+SIMD parsing</text>
    <text x="40" y="127" fill="#43e97b" font-family="Arial, sans-serif" font-size="9">6× → 2.5 GB/s</text>

    <circle cx="25" cy="155" r="6" fill="#38f9d7"/>
    <text x="40" y="158" fill="#888" font-family="Arial, sans-serif" font-size="10">+Schema skip</text>
    <text x="40" y="172" fill="#43e97b" font-family="Arial, sans-serif" font-size="9">4× → 10.5 GB/s</text>

    <circle cx="25" cy="200" r="6" fill="#43e97b"/>
    <text x="40" y="203" fill="#888" font-family="Arial, sans-serif" font-size="10">+Parallel scaling</text>
    <text x="40" y="217" fill="#43e97b" font-family="Arial, sans-serif" font-size="9">27× → 285 GB/s</text>

    <line x1="15" y1="235" x2="185" y2="235" stroke="#333" stroke-width="1"/>

    <text x="100" y="260" text-anchor="middle" fill="#43e97b" font-family="Arial, sans-serif" font-size="14" font-weight="bold">712× total</text>
    <text x="100" y="275" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="9">from baseline</text>
  </g>
</svg>
