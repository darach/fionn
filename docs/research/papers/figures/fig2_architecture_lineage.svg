<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700" font-family="Inter, -apple-system, sans-serif">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9ca3af"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.12"/>
    </filter>
    <linearGradient id="mison" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#818cf8"/>
      <stop offset="100%" style="stop-color:#6366f1"/>
    </linearGradient>
    <linearGradient id="simdjson" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#60a5fa"/>
      <stop offset="100%" style="stop-color:#3b82f6"/>
    </linearGradient>
    <linearGradient id="jsonski" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24"/>
      <stop offset="100%" style="stop-color:#f59e0b"/>
    </linearGradient>
    <linearGradient id="sonic" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f472b6"/>
      <stop offset="100%" style="stop-color:#ec4899"/>
    </linearGradient>
    <linearGradient id="fionn" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34d399"/>
      <stop offset="100%" style="stop-color:#10b981"/>
    </linearGradient>
    <linearGradient id="crdt" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#a78bfa"/>
      <stop offset="100%" style="stop-color:#8b5cf6"/>
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="500" y="35" text-anchor="middle" font-size="20" font-weight="700" fill="#111827">Architecture Lineage and Source Attribution</text>

  <!-- Mison (top) -->
  <g transform="translate(400, 60)">
    <rect width="200" height="90" rx="8" fill="url(#mison)" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="white">Mison</text>
    <text x="100" y="42" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">Microsoft Research, 2017</text>
    <line x1="20" y1="52" x2="180" y2="52" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="68" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Structural indexing</text>
    <text x="100" y="80" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Projection pushdown</text>
  </g>

  <!-- Arrows from Mison -->
  <path d="M 450 150 L 250 200" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 500 150 L 500 200" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 550 150 L 750 200" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Second row: simdjson, JSONSki, sonic-rs -->
  <!-- simdjson -->
  <g transform="translate(120, 210)">
    <rect width="200" height="110" rx="8" fill="url(#simdjson)" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="white">simdjson</text>
    <text x="100" y="42" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">Langdale &amp; Lemire, 2019</text>
    <line x1="20" y1="52" x2="180" y2="52" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="68" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Two-stage parsing</text>
    <text x="100" y="80" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">XOR prefix, branchless escape</text>
    <text x="100" y="92" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Tape format</text>
  </g>

  <!-- JSONSki -->
  <g transform="translate(400, 210)">
    <rect width="200" height="110" rx="8" fill="url(#jsonski)" filter="url(#shadow)"/>
    <rect x="130" y="5" width="65" height="18" rx="9" fill="white"/>
    <text x="162" y="17" text-anchor="middle" font-size="8" font-weight="600" fill="#b45309">Best Paper</text>
    <text x="100" y="35" text-anchor="middle" font-size="14" font-weight="600" fill="white">JSONSki</text>
    <text x="100" y="52" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">Jiang &amp; Zhao, ASPLOS 2022</text>
    <line x1="20" y1="62" x2="180" y2="62" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="78" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Fast-forwarding</text>
    <text x="100" y="90" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Bracket counting</text>
    <text x="100" y="102" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Structural intervals</text>
  </g>

  <!-- sonic-rs -->
  <g transform="translate(680, 210)">
    <rect width="200" height="110" rx="8" fill="url(#sonic)" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="white">sonic-rs</text>
    <text x="100" y="42" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">ByteDance/CloudWeGo, 2023</text>
    <line x1="20" y1="52" x2="180" y2="52" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="68" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Direct parsing (no tape)</text>
    <text x="100" y="80" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Arena allocation</text>
    <text x="100" y="92" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">LazyValue, on-demand SIMD</text>
  </g>

  <!-- simd-json (Rust) -->
  <g transform="translate(120, 370)">
    <rect width="200" height="90" rx="8" fill="#475569" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="white">simd-json</text>
    <text x="100" y="42" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">Rust port, simd-lite</text>
    <line x1="20" y1="52" x2="180" y2="52" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="68" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Safe Rust abstractions</text>
    <text x="100" y="80" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Tape API, Serde integration</text>
  </g>

  <!-- Arrow from simdjson to simd-json -->
  <path d="M 220 320 L 220 360" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrows to fionn -->
  <path d="M 220 460 L 400 530" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 500 320 L 500 530" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 780 320 L 600 530" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

  <!-- CRDT sources -->
  <g transform="translate(680, 400)">
    <rect width="200" height="90" rx="8" fill="url(#crdt)" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="white">CRDT Foundations</text>
    <text x="100" y="42" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.8)">Kleppmann 2017 + DSON</text>
    <line x1="20" y1="52" x2="180" y2="52" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
    <text x="100" y="68" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Delta-state CRDTs</text>
    <text x="100" y="80" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.9)">Observed-remove semantics</text>
  </g>

  <!-- Arrow from CRDT to fionn -->
  <path d="M 780 490 L 600 530" stroke="#9ca3af" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

  <!-- fionn (main box) -->
  <g transform="translate(300, 540)">
    <rect width="400" height="150" rx="10" fill="url(#fionn)" filter="url(#shadow)"/>
    <text x="200" y="30" text-anchor="middle" font-size="18" font-weight="700" fill="white">fionn</text>
    <text x="200" y="50" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.8)">This Project</text>
    <line x1="30" y1="62" x2="370" y2="62" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>

    <!-- Two columns of features -->
    <text x="30" y="82" font-size="10" font-weight="600" fill="rgba(255,255,255,0.9)">INHERITED:</text>
    <text x="35" y="97" font-size="9" fill="rgba(255,255,255,0.85)">XOR prefix, branchless escape (simdjson)</text>
    <text x="35" y="110" font-size="9" fill="rgba(255,255,255,0.85)">Bracket counting (JSONSki)</text>
    <text x="35" y="123" font-size="9" fill="rgba(255,255,255,0.85)">Arena allocation (sonic-rs)</text>
    <text x="35" y="136" font-size="9" fill="rgba(255,255,255,0.85)">Rust idioms (simd-json)</text>

    <text x="210" y="82" font-size="10" font-weight="600" fill="white">NOVEL:</text>
    <text x="215" y="97" font-size="9" fill="white">Operation-inferred schema</text>
    <text x="215" y="110" font-size="9" fill="white">Skip tape with SkipMarkers</text>
    <text x="215" y="123" font-size="9" fill="white">CRDT operation integration</text>
    <text x="215" y="136" font-size="9" fill="white">Parallel batch skipping (rayon)</text>
  </g>
</svg>